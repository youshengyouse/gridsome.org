(window.webpackJsonp=window.webpackJsonp||[]).push([[46],{KQkx:function(t,e,o){"use strict";o.r(e);var a=o("K+aO"),r=o("Q4w9"),s=o("mGku");function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}s.default.config.optionMergeStrategies;var l={VueRemarkRoot:r.a},p=function(t){var e=t.options.components=t.options.components||{},o=t.options.computed=t.options.computed||{};Object.keys(l).forEach((function(t){"object"===n(l[t])&&"function"==typeof l[t].render||"function"==typeof l[t]&&"function"==typeof l[t].options.render?e[t]=l[t]:o[t]=function(){return l[t]}}))},u=s.default.config.optionMergeStrategies,i="__vueRemarkFrontMatter",c={excerpt:null,title:"Deploy to Google Cloud Platform"};var d=function(t){t.options[i]&&(t.options[i]=c),s.default.util.defineReactive(t.options,i,c),t.options.computed=u.computed({$frontmatter:function(){return t.options[i]}},t.options.computed)},v=Object(a.a)({},(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("VueRemarkRoot",[o("h1",{attrs:{id:"deploy-to-google-cloud-platform"}},[o("a",{attrs:{href:"#deploy-to-google-cloud-platform","aria-hidden":"true"}},[t._v("#")]),t._v("Deploy to Google Cloud Platform")]),o("h2",{attrs:{id:"prerequisites"}},[o("a",{attrs:{href:"#prerequisites","aria-hidden":"true"}},[t._v("#")]),t._v("Prerequisites")]),o("ol",[o("li",[t._v("Create a project op Google Cloud Platform")]),o("li",[t._v("Have access to DNS record of your domain")])]),o("p",[t._v("You can host a static website on a Google Cloud Storage bucket for a domain you own.")]),o("p",[t._v("The downside to this is that you can only use HTTP.\nPlease follow this "),o("a",{attrs:{href:"https://cloud.google.com/storage/docs/hosting-static-website",target:"_blank",rel:"nofollow noopener noreferrer"}},[t._v("tutorial")]),t._v(" for a HTTP only website")]),o("p",[t._v("The HTTPS configuration is a bit more complex.")]),o("h2",{attrs:{id:"use-a-cloud-storage-bucket-as-a-load-balancer-backend"}},[o("a",{attrs:{href:"#use-a-cloud-storage-bucket-as-a-load-balancer-backend","aria-hidden":"true"}},[t._v("#")]),t._v("Use a Cloud Storage bucket as a load balancer backend")]),o("ol",[o("li",[t._v("Configure a Cloud Storage bucket")]),o("li",[t._v("Configure a load balancing service")]),o("li",[t._v("Create an external address")])]),o("p",[t._v("Please follow the steps in the well documented Google "),o("a",{attrs:{href:"https://cloud.google.com/load-balancing/docs/https/adding-a-backend-bucket-to-content-based-load-balancing",target:"_blank",rel:"nofollow noopener noreferrer"}},[t._v("tutorial")])]),o("h3",{attrs:{id:"set-main-and-error-page-for-bucket"}},[o("a",{attrs:{href:"#set-main-and-error-page-for-bucket","aria-hidden":"true"}},[t._v("#")]),t._v("Set main and error page for bucket")]),o("pre",{pre:!0,attrs:{class:"language-shell"}},[o("code",{pre:!0,attrs:{class:"language-shell"}},[t._v("gsutil web "),o("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("set")]),t._v(" -m index.html -e "),o("span",{pre:!0,attrs:{class:"token number"}},[t._v("404")]),t._v(".html gs://your-bucket-name")])]),o("p",[o("a",{attrs:{href:"https://cloud.google.com/storage/docs/gsutil/commands/web",target:"_blank",rel:"nofollow noopener noreferrer"}},[t._v("Documentation")])]),o("h2",{attrs:{id:"google-cloud-build"}},[o("a",{attrs:{href:"#google-cloud-build","aria-hidden":"true"}},[t._v("#")]),t._v("Google cloud build")]),o("h3",{attrs:{id:"setup-google-source-repositories"}},[o("a",{attrs:{href:"#setup-google-source-repositories","aria-hidden":"true"}},[t._v("#")]),t._v("Setup Google Source Repositories")]),o("p",[o("a",{attrs:{href:"https://cloud.google.com/source-repositories/docs/",target:"_blank",rel:"nofollow noopener noreferrer"}},[t._v("Documentation")])]),o("h3",{attrs:{id:"add-build-trigger"}},[o("a",{attrs:{href:"#add-build-trigger","aria-hidden":"true"}},[t._v("#")]),t._v("Add Build trigger")]),o("p",[t._v("Create a new "),o("a",{attrs:{href:"https://console.cloud.google.com/cloud-build/triggers",target:"_blank",rel:"nofollow noopener noreferrer"}},[t._v("trigger")])]),o("p",[t._v("Add a "),o("code",{pre:!0},[t._v("cloudbuild.yaml")]),t._v(" to the root of the project containing:")]),o("pre",{pre:!0,attrs:{class:"language-yaml"}},[o("code",{pre:!0,attrs:{class:"language-yaml"}},[o("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("steps")]),o("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),o("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),o("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),o("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),o("span",{pre:!0,attrs:{class:"token string"}},[t._v("'gcr.io/cloud-builders/npm'")]),t._v("\n    "),o("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("args")]),o("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),o("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),o("span",{pre:!0,attrs:{class:"token string"}},[t._v("'install'")]),o("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n  "),o("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),o("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),o("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),o("span",{pre:!0,attrs:{class:"token string"}},[t._v("'gcr.io/cloud-builders/npm'")]),t._v("\n    "),o("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("args")]),o("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),o("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),o("span",{pre:!0,attrs:{class:"token string"}},[t._v("'run'")]),t._v(" "),o("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),o("span",{pre:!0,attrs:{class:"token string"}},[t._v("'build'")]),o("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n  "),o("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),o("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),o("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),o("span",{pre:!0,attrs:{class:"token string"}},[t._v("'gcr.io/cloud-builders/gsutil'")]),t._v("\n    "),o("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("args")]),o("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),o("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),o("span",{pre:!0,attrs:{class:"token string"}},[t._v('"-m"')]),o("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),o("span",{pre:!0,attrs:{class:"token string"}},[t._v('"rsync"')]),o("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),o("span",{pre:!0,attrs:{class:"token string"}},[t._v('"-r"')]),o("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),o("span",{pre:!0,attrs:{class:"token string"}},[t._v('"-c"')]),o("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),o("span",{pre:!0,attrs:{class:"token string"}},[t._v('"-d"')]),o("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),o("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./dist"')]),o("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),o("span",{pre:!0,attrs:{class:"token string"}},[t._v('"gs://bucket-name"')]),o("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")])])]),o("p",[t._v("Last build step is to push static files to your bucket.")]),o("h3",{attrs:{id:"link-dns-record-to-reserved-external-google-ip"}},[o("a",{attrs:{href:"#link-dns-record-to-reserved-external-google-ip","aria-hidden":"true"}},[t._v("#")]),t._v("Link DNS record to reserved external Google IP")]),o("p",[t._v("You must link these to resolve your domain to our external Google IP address.\nThis can be done in your DNS service")])])}),[],!1,null,null,null);"function"==typeof p&&p(v),"function"==typeof d&&d(v);e.default=v.exports},Q4w9:function(t,e,o){"use strict";e.a={name:"VueRemarkRoot",render:function(t){return t("div",null,this.$slots.default)}}}}]);